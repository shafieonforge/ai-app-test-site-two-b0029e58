'use client';

import React, { useState } from 'react';
import Sidebar from './components/Layout/Sidebar';
import TopBar from './components/Layout/TopBar';
import InsuranceDashboard from './components/Dashboard/InsuranceDashboard';
import ClaimsProcessor from './components/Claims/ClaimsProcessor';

export default function Home() {
  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);
  const [currentModule, setCurrentModule] = useState('dashboard');

  // Mock user data - in real app, this would come from authentication
  const currentUser = {
    name: 'Sarah Johnson',
    email: 'sarah.johnson@acmeinsurance.com',
    role: 'adjuster',
    organization: 'Acme Insurance Corp'
  };

  // Mock notifications
  const notifications = [
    {
      id: '1',
      type: 'warning' as const,
      title: 'High-Value Claim Alert',
      message: 'Claim #CLM-789123 requires immediate review - $75,000 loss amount',
      timestamp: new Date(Date.now() - 1000 * 60 * 15), // 15 minutes ago
      read: false
    },
    {
      id: '2',
      type: 'info' as const,
      title: 'Processing Complete',
      message: 'Batch processing of 45 documents completed successfully',
      timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2), // 2 hours ago
      read: false
    },
    {
      id: '3',
      type: 'error' as const,
      title: 'System Alert',
      message: 'OCR processing failed for document IMG_4829.jpg',
      timestamp: new Date(Date.now() - 1000 * 60 * 60 * 4), // 4 hours ago
      read: true
    }
  ];

  const handleModuleChange = (module: string) => {
    setCurrentModule(module);
  };

  const renderCurrentModule = () => {
    switch (currentModule) {
      case 'claims':
        return (
          <ClaimsProcessor
            onDocumentProcessed={(doc) => console.log('Document processed:', doc)}
            onFraudDetected={(alert) => console.log('Fraud detected:', alert)}
          />
        );
      case 'dashboard':
      default:
        return <InsuranceDashboard />;
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 flex">
      {/* Sidebar */}
      <Sidebar 
        isCollapsed={sidebarCollapsed} 
        userRole={currentUser.role}
      />
      
      {/* Main Content */}
      <div className="flex-1 flex flex-col min-w-0">
        {/* Top Navigation */}
        <TopBar
          onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}
          user={currentUser}
          notifications={notifications}
        />
        
        {/* Page Content */}
        <main className="flex-1 p-6 overflow-auto">
          {renderCurrentModule()}
        </main>
      </div>
    </div>
  );
}